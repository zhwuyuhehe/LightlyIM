import{d as x,k as y,l as w,e as P,w as s,r as m,u as R,j as h,a as o,m as F,b,g,E as _,_ as k}from"./index-7JKY8DTR.js";import{C as L}from"./CaptchaCode-DIKGrsDY.js";import{P as U}from"./Interactive-NSA2erjS.js";const B={style:{display:"flex","text-align":"center","justify-items":"center","align-items":"center",margin:"0 auto"}},$=x({__name:"RegisterForm",setup(j){const C=R(),u=y(),t=w({username:"",password:"",confirmPassword:"",userEmail:"",confirmNum:""});let d;const V=l=>{d=l,u.value&&t.confirmNum&&u.value.validateField("confirmNum")},v=l=>{l&&l.resetFields()},E=w({username:[{validator:(l,e,r)=>{if(e){if(t.username.length>16||t.username.length<4)return r(new Error("用户名长度需要在4~20之间！"))}else return r(new Error("请输入用户名！"));r()},trigger:"blur"}],userEmail:[{validator:(l,e,r)=>{if(!e)return r(new Error("请输入邮箱!"));r()},trigger:"blur"}],password:[{validator:(l,e,r)=>{if(e){if(e.length<4||e.length>16)return r(new Error("请输入4~16位密码！"));t.confirmPassword!==""&&u.value&&u.value.validateField("confirmPassword")}else return r(new Error("请输入密码！"));r()},trigger:"blur"}],confirmPassword:[{validator:(l,e,r)=>{if(e){if(e!==t.password)return r(new Error("两次输入的密码不一致！"));r()}else return r(new Error("请输入再次确认的密码！"))},trigger:"blur"}],confirmNum:[{validator:(l,e,r)=>{if(e){if(e.toLowerCase()!==d.toLowerCase())return r(new Error(e.toLowerCase()+"请输入正确的验证码！"+d.toLowerCase()))}else return r(new Error("请输入验证码！"));r()},trigger:"blur"}]}),f=l=>{l&&l.validate(e=>{e?U({url:"/register",data:{nickname:t.username,password:t.password,email:t.userEmail}}).then(r=>{const n=r.data;_({title:"展示返回值",message:"额外信息："+JSON.stringify(n),type:"success"}),n.status===2003&&C.replace({name:"LoginForm"})}).catch(r=>{console.error(r)}):_({title:"提交错误！",message:"未按规定填写内容",type:"warning"})})};return(l,e)=>{const r=m("el-input"),n=m("el-form-item"),i=m("el-col"),p=m("el-row"),c=m("el-button"),N=m("el-form");return h(),P(N,{"label-position":"top","label-width":"auto",ref_key:"RegisterFormRef",ref:u,model:t,rules:E},{default:s(()=>[o(p,{gutter:20},{default:s(()=>[o(i,{xs:24,sm:12,md:12},{default:s(()=>[o(n,{label:"注册用户",prop:"username"},{default:s(()=>[o(r,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.username=a),placeholder:"请输入你准备注册的用户名",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{xs:24,sm:12,md:12},{default:s(()=>[o(n,{label:"用户邮箱",prop:"userEmail"},{default:s(()=>[o(r,{modelValue:t.userEmail,"onUpdate:modelValue":e[1]||(e[1]=a=>t.userEmail=a),placeholder:"请输入你的邮箱号码",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(p,{gutter:20},{default:s(()=>[o(i,{xs:24,sm:12,md:12},{default:s(()=>[o(n,{label:"注册密码",prop:"password"},{default:s(()=>[o(r,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=a=>t.password=a),placeholder:"请输入你准备注册的密码",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{xs:24,sm:12,md:12},{default:s(()=>[o(n,{label:"确认密码",prop:"confirmPassword"},{default:s(()=>[o(r,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>t.confirmPassword=a),placeholder:"请再次确认输入的密码",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(n,{label:"验证码",prop:"confirmNum"},{default:s(()=>[o(r,{clearable:"",placeholder:"请输入验证码",modelValue:t.confirmNum,"onUpdate:modelValue":e[4]||(e[4]=a=>t.confirmNum=a),autocomplete:"off",onKeyup:e[5]||(e[5]=F(a=>f(u.value),["enter"]))},{append:s(()=>[o(L,{onGetCaptchaCode:V})]),_:1},8,["modelValue"])]),_:1}),o(n,null,{default:s(()=>[b("div",B,[o(c,{type:"primary",onClick:e[6]||(e[6]=a=>f(u.value))},{default:s(()=>e[8]||(e[8]=[g("提交注册")])),_:1}),o(c,{onClick:e[7]||(e[7]=a=>v(u.value))},{default:s(()=>e[9]||(e[9]=[g("重置输入")])),_:1})])]),_:1})]),_:1},8,["model","rules"])}}}),O=k($,[["__scopeId","data-v-8d9bf48f"]]);export{O as default};
